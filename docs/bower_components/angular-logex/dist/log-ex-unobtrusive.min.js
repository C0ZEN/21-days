/**
 * Log Unobtrusive Extension v0.0.14
 *
 * Used within AngularJS to enhance functionality within the AngularJS $log service.
 *
 * @original-author  Thomas Burleson
 * @contributor Layton Whiteley
 * @contributor A confused individual <ferronrsmith@gmail.com>
 * @website http://www.theSolutionOptimist.com
 * (c) 2016 https://github.com/lwhiteley/AngularLogExtender
 * License: MIT
 *
 * Modifications made by @contributor Layton Whiteley:
 * - Modified to be a full stand-alone Angular Application for reuse
 * - Has global and feature level activation/disabling for $log
 * - Supported sensitive field filtering
 * - Created and tested with AngularJS versions : 1.0.4, 1.1.0, 1.1.2, 1.2.28, 1.3.14, 1.4.0-rc.0, 1.5.0
 */
angular.module("log.ex.uo",[]).provider("logEx",["$provide",function(n){var r=angular.injector(["ng"]),t=r.get("$filter"),e=!1,o=!1,i=!1,a=!1,u=!1,l=null,g=navigator.userAgent,c=["log","info","warn","debug","error","getInstance"],s=["firefox","AppleWebKit"],f=!0,h=["color","background","font-size","border"],d="[FILTERED]",p={filterString:d,logFilters:[]},v={log:"color: green;",info:"color: blue",warn:"color: #CC9933;",debug:"color: brown;",error:"color: red;"},L=c,b=function(n){var r=" >> ",e="MMM-dd-yyyy-h:mm:ssa",o=t("date")(new Date,e);return""+o+("string"!==E(n)?"":"::"+n)+r},E=function(n){return Object.prototype.toString.call(n).replace(/(\[|object|\s|])/g,"").toLowerCase()},y=function(n){return/(object|array)/.test(E(n))},x=function(n){return"string"===E(n)?n.replace(/^\s*/,"").replace(/\s*$/,""):""},F=function(n){return"boolean"===E(n)},D=function(n){return"string"===E(n)&&""!==x(n)},C=function(n,r){return"string"===E(n)&&"string"===E(r)&&-1!==r.toLowerCase().indexOf(n.toLowerCase())?!0:!1},O=function(n){var r="";return r=!u&&a?l(n):b(n)},G=function(){for(var n=0;s.length>n;n++)if(C(s[n],g))return!0;return!1},I=G(),w=function(n){return 1===n.length&&"string"===E(n[0])},A=function(n){for(var r=0;h.length>r;r++)if(C(h[r],n))return!0;return!1},j=function(n){return"string"===E(n)&&C(":",n)&&x(n).length>6&&A(n)},m=function(n,r,t){t="string"===E(t)?t:"";var e=I&&j(r)&&"string"===E(n),o=e?""+t+n:n;return e?["%c"+o,r]:[o]},M=function(n,r){return F(n)&&n&&2===r.length},S=function(n,r,t){var e="string"!==E(n)&&"object"!==E(r),o="string"!==E(n)||"object"!==E(r);return e||o?Array.prototype.slice.call(arguments):(t="regexp"===E(t)?t:/\{([^{}]*)}/g,n.replace(t,function(n,t){var e=t.split("."),o=r;try{angular.forEach(e,function(n,r){o=o[e[r]]})}catch(i){o=n}return"string"===E(o)||"number"===E(o)?o:n}))},$=function(n){var r=angular.copy(n);return y(r)&&p.logFilters.length>0?(angular.forEach(r,function(n,t){angular.forEach(p.logFilters,function(e){"object"===E(n)&&n.hasOwnProperty(e)&&!y(n[e])?n[e]=p.filterString:y(n)&&(r[t]=$(n))})}),r):r};n.decorator("$log",["$delegate",function(n){var r=function(){var n=function(n){return F(n)},r=function(n){return n!==!1},t=function(n,r){return F(n)&&F(r)?r:!1},e=function(n,r,t,e,o){var i=D(e)?e:"this instance";!o&&r&&t?n.log(O()+"[OVERRIDE] LOGGING ENABLED - $log enabled for "+i):o&&r&&!t&&n.log(O()+"[OVERRIDE] LOGGING DISABLED - $log disabled for "+i)},i=function(n){var r={};return angular.isArray(n)&&(r={getInstance:angular.noop},angular.forEach(n,function(n){r[n]=angular.noop})),r},a=function(n,r,t,e){var o={},a=i(r);return angular.forEach(c,function(r){var i;if(angular.isDefined(e)){var u=[];angular.copy(e,u),u.unshift(n[r]),I&&f&&(u[5]=j(u[5])?u[5]:v[r]),i=t.apply(null,u)}else i=n[r];o[r]=angular.isUndefined(a[r])?angular.noop:i}),o},u=function(i){var u=function(n,r,e,i,a,u){var l=a;!a&&o&&(l=o);var g=function(){var o=i?t(c,e):c;if(o){var a=Array.prototype.slice.call(arguments);p.logFilters.length>0&&(a=$(a));var g=O(r);if(M(l,a)){var s=S.apply(null,a);s="string"===E(s)?[s]:s,a=s}"string"===E(u)&&w(a)?a=m(a[0],u,g):a.unshift(g),n&&n.apply(null,a)}};return g.logs=[],g},l=a(i,L),g=function(t,o,i,g){F(t)?(o=t,t=null):t="string"===E(t)?x(t):null;var s=n(o);return o=r(o),e(l,s,o,t,c),a(l,L,u,[t,o,s,i,g])},c=!1,s=!1;return angular.extend(i,a(i,L,u,[null,!1,!1,!1,null])),i.getInstance=g,i.enableLog=function(n,r){c=n,s=r},i.logEnabled=function(){return c&&!s},i},l=function(n){return a(n,L)};this.enhanceLogger=u,this.exposeSafeLog=l},t=new r;return t.enhanceLogger(n),n.enableLog(e,i),n.logEnabled()&&n.log("CONFIG: LOGGING ENABLED GLOBALLY"),t.exposeSafeLog(n)}]);var N=function(n,r){e=F(n)?n:!1,i=F(r)?r:!1},P=function(n){o=F(n)?n:!1},R=function(n){angular.isArray(n)&&(L=n)},B=function(n){angular.isFunction(n)&&(l=n,a=!0)},T=function(n){f=!(F(n)&&n)},U=function(n,r){"string"===E(n)&&v.hasOwnProperty(n)&&j(r)&&(v[n]=r)},V=function(n){"object"===E(n)&&angular.forEach(n,function(n,r){U(r,n)})},k=function(n){angular.isUndefined(n)?u=!0:F(n)&&(u=n)},z=function(n){"object"===E(n)&&"array"===E(n.logFilters)&&n.logFilters.length>0&&(angular.forEach(n.logFilters,function(n){"string"===E(n)&&0>p.logFilters.indexOf(n)&&p.logFilters.push(n)}),p.filterString="string"!==E(n.filterString)?d:n.filterString)};this.$get=function(){return{name:"Log Unobtrusive Extension",version:"0.0.14",enableLogging:N,restrictLogMethods:R,overrideLogPrefix:B,disableDefaultColors:T,setLogMethodColor:U,overrideLogMethodColors:V,useDefaultLogPrefix:k,configureLogFilters:z,useTemplates:P}},this.enableLogging=N,this.overrideLogPrefix=B,this.restrictLogMethods=R,this.disableDefaultColors=T,this.setLogMethodColor=U,this.overrideLogMethodColors=V,this.useDefaultLogPrefix=k,this.configureLogFilters=z,this.useTemplates=P}]);