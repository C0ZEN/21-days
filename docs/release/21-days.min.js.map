{"version":3,"sources":["21-days.js"],"names":["angular","module","window","config","$inject","$compileProvider","appConstant","debugInfoEnabled","logExProvider","enableLogging","logs","enabled","overrideLogPrefix","$className","$injector","injector","$filter","get","separator","format","now","Date","toString","isString","tmhDynamicLocaleProvider","localeLocationPattern","defaultLocale","constant","lang","current","moment","readableFormat","controller","mainController","$scope","logService","dateService","$window","$timeout","copyService","calculatedDateHistoryService","vm","methods","execHideDatePicker","data","today","initialDate","showDatepicker","isHoverDatepicker","history","define21Date","onDatepickerClick","toggleDatepicker","onDatepickerEnter","onDatepickerFocus","onWindowClick","hideDatepicker","isDatepickerOpen","onCopySuccess","onInitialDateChange","init","calculatedDate","$watch","addEventListener","subscribe","$data","newHistory","fnCalled","add21days","$event","stopPropagation","$force","show","Methods","safeApply","directive","onEnter","keyboardService","enter","link","restrict","scope","element","attrs","bindKeyDown","run","tmhDynamicLocale","set","locale","$animate","loaderContainer","document","find","leave","addClass","factory","$rootScope","service","newException","notify","reset","setOriginal","setCalculated","setFinal","addWeekend","addFerie","$callback","handler","$on","exception","exceptionTriggered","exceptionList","$date","original","date","calculated","final","type","push","$emit","fnCalledService","container","setClass","then","removeClass","days","sunday","saturday","one","two","ms","add","isSunday","isSaturday","isDay","isWeekend","setNextDayAfterWeekend","weekendAndExceptionsStuff","readable","toTimestamp","toISOString","$quantity","$type","$day","day","weekend","dateBefore","dateAfter","isFerie","ferie","getFerie","unix","analyzeKey","$element","$attrs","$key","$name","bind","isArray","forEach","key","keyCode","preventDefault","$apply","$eval","$log","log","$target","$text","info","$functionName","$service","fn","phase","$root","$$phase","console"],"mappings":"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","file":"21-days.min.js","sourcesContent":["'use strict';\n\n/* start:concat-scripts */\n(function (angular) {\n\t'use strict';\n\n\tangular.module('21days', ['tmh.dynamicLocale', '720kb.datepicker', 'ngclipboard', 'ngAnimate', 'log.ex.uo']);\n})(window.angular);\n\n(function (angular) {\n\t'use strict';\n\n\tangular.module('21days').config(config);\n\n\tconfig.$inject = ['$compileProvider', 'appConstant'];\n\n\tfunction config($compileProvider, appConstant) {\n\t\t$compileProvider.debugInfoEnabled(appConstant.debugInfoEnabled);\n\t}\n})(window.angular);\n(function (angular) {\n\t'use strict';\n\n\tangular.module('21days').config(config);\n\n\tconfig.$inject = ['logExProvider', 'appConstant'];\n\n\tfunction config(logExProvider, appConstant) {\n\t\tlogExProvider.enableLogging(appConstant.logs.enabled);\n\t\tlogExProvider.overrideLogPrefix(function ($className) {\n\t\t\tvar $injector = angular.injector(['ng']);\n\t\t\tvar $filter = $injector.get('$filter');\n\t\t\tvar separator = ' >>';\n\t\t\tvar format = 'hh:mm:ss';\n\t\t\tvar now = $filter('date')(new Date(), format);\n\t\t\treturn now.toString() + (!angular.isString($className) ? '' : '::' + $className) + separator;\n\t\t});\n\t}\n})(window.angular);\n(function (angular) {\n\t'use strict';\n\n\tangular.module('21days').config(config);\n\n\tconfig.$inject = ['tmhDynamicLocaleProvider'];\n\n\tfunction config(tmhDynamicLocaleProvider) {\n\t\ttmhDynamicLocaleProvider.localeLocationPattern('/21-days/bower_components/angular-i18n/angular-locale_{{locale}}.js').defaultLocale('fr');\n\t}\n})(window.angular);\n\n(function (angular) {\n\t'use strict';\n\n\tangular.module('21days').constant('appConstant', {\n\t\tlogs: {\n\t\t\tenabled: false\n\t\t},\n\t\tlang: {\n\t\t\tcurrent: 'fr'\n\t\t},\n\t\tdebugInfoEnabled: false,\n\t\tmoment: {\n\t\t\treadableFormat: 'dddd DD MMMM YYYY'\n\t\t}\n\t});\n})(window.angular);\n(function (angular) {\n\t'use strict';\n\n\tangular.module('21days').constant('moment', moment);\n})(window.angular);\n\n(function (angular) {\n\t'use strict';\n\n\tangular.module('21days').controller('mainController', mainController);\n\n\tmainController.$inject = ['$scope', 'logService', 'dateService', '$window', '$timeout', 'copyService', 'calculatedDateHistoryService'];\n\n\tfunction mainController($scope, logService, dateService, $window, $timeout, copyService, calculatedDateHistoryService) {\n\t\tvar vm = this;\n\n\t\t// Internal methods\n\t\tvar methods = {\n\t\t\texecHideDatePicker: execHideDatePicker\n\t\t};\n\n\t\t// Public data\n\t\tvm.data = {\n\t\t\tcontroller: 'mainController',\n\t\t\ttoday: dateService.toString(),\n\t\t\tinitialDate: null,\n\t\t\tshowDatepicker: false,\n\t\t\tisHoverDatepicker: false,\n\t\t\thistory: null\n\t\t};\n\n\t\t// Public methods\n\t\tvm.methods = {\n\t\t\tdefine21Date: define21Date,\n\t\t\tonDatepickerClick: onDatepickerClick,\n\t\t\ttoggleDatepicker: toggleDatepicker,\n\t\t\tonDatepickerEnter: onDatepickerEnter,\n\t\t\tonDatepickerFocus: onDatepickerFocus,\n\t\t\tonWindowClick: onWindowClick,\n\t\t\thideDatepicker: hideDatepicker,\n\t\t\tisDatepickerOpen: isDatepickerOpen,\n\t\t\tisHoverDatepicker: isHoverDatepicker,\n\t\t\tonCopySuccess: onCopySuccess,\n\t\t\tonInitialDateChange: onInitialDateChange\n\t\t};\n\n\t\t// Init\n\t\tlogService.init(vm.data.controller);\n\t\tvm.calculatedDate = null;\n\n\t\t// Watch initialDate changes\n\t\t$scope.$watch('initialDate', function () {\n\t\t\t$timeout(function () {\n\t\t\t\tvm.methods.define21Date();\n\t\t\t});\n\t\t});\n\n\t\t// Listen window click\n\t\t$window.addEventListener('click', vm.methods.onWindowClick);\n\n\t\t// Subscribe to calculated date history\n\t\tcalculatedDateHistoryService.subscribe($scope, function ($data) {\n\t\t\tvm.data.history = $data.newHistory;\n\t\t});\n\n\t\tfunction define21Date() {\n\t\t\tlogService.fnCalled('define21Date');\n\t\t\tvm.calculatedDate = dateService.add21days(vm.initialDate);\n\t\t}\n\n\t\tfunction onDatepickerClick($event) {\n\t\t\tlogService.fnCalled('onDatepickerClick');\n\t\t\t$event.stopPropagation();\n\t\t\tvm.methods.toggleDatepicker();\n\t\t}\n\n\t\tfunction toggleDatepicker() {\n\t\t\tlogService.fnCalled('toggleDatepicker');\n\t\t\tvm.data.showDatepicker = !vm.data.showDatepicker;\n\t\t\tvm.methods.define21Date();\n\t\t}\n\n\t\tfunction onDatepickerEnter() {\n\t\t\tlogService.fnCalled('onDatepickerEnter');\n\t\t\tvm.methods.toggleDatepicker();\n\t\t}\n\n\t\tfunction onDatepickerFocus($event) {\n\t\t\tlogService.fnCalled('onDatepickerFocus');\n\t\t\t$event.stopPropagation();\n\t\t\tvm.methods.toggleDatepicker();\n\t\t}\n\n\t\tfunction onWindowClick() {\n\t\t\tlogService.fnCalled('onWindowClick');\n\t\t\tvm.methods.hideDatepicker();\n\t\t}\n\n\t\tfunction hideDatepicker($force) {\n\t\t\tlogService.fnCalled('hideDatepicker');\n\t\t\tif (true === $force) {\n\t\t\t\tmethods.execHideDatePicker();\n\t\t\t} else if (vm.methods.isDatepickerOpen() && !vm.methods.isHoverDatepicker()) {\n\t\t\t\tmethods.execHideDatePicker();\n\t\t\t}\n\t\t}\n\n\t\tfunction isDatepickerOpen() {\n\t\t\treturn vm.data.showDatepicker;\n\t\t}\n\n\t\tfunction isHoverDatepicker() {\n\t\t\treturn vm.data.isHoverDatepicker;\n\t\t}\n\n\t\tfunction onCopySuccess() {\n\t\t\tlogService.fnCalled('onCopySuccess');\n\t\t\tcopyService.show();\n\t\t}\n\n\t\tfunction onInitialDateChange() {\n\t\t\tlogService.fnCalled('onInitialDateChange');\n\t\t\t$timeout(function () {\n\t\t\t\tvm.methods.hideDatepicker(true);\n\t\t\t\tvm.methods.define21Date();\n\t\t\t});\n\t\t}\n\n\t\tfunction execHideDatePicker() {\n\t\t\tvm.data.showDatepicker = false;\n\t\t\tvm.methods.define21Date();\n\t\t\tMethods.safeApply($scope);\n\t\t}\n\t}\n})(window.angular);\n\n(function (angular) {\n\t'use strict';\n\n\tangular.module('21days').directive('onEnter', onEnter);\n\n\tonEnter.$inject = ['keyboardService'];\n\n\tfunction onEnter(keyboardService) {\n\t\tvar data = {\n\t\t\tenter: 13\n\t\t};\n\n\t\treturn {\n\t\t\tlink: link,\n\t\t\trestrict: 'A'\n\t\t};\n\n\t\tfunction link(scope, element, attrs) {\n\t\t\tkeyboardService.bindKeyDown(scope, element, attrs, data.enter, 'onEnter');\n\t\t}\n\t}\n})(window.angular);\n\n(function (angular) {\n\t'use strict';\n\n\tangular.module('21days').run(config);\n\n\tconfig.$inject = ['tmhDynamicLocale', 'moment', 'appConstant'];\n\n\tfunction config(tmhDynamicLocale, moment, appConstant) {\n\t\ttmhDynamicLocale.set(appConstant.lang.current);\n\t\tmoment.locale(appConstant.lang.current);\n\t}\n})(window.angular);\n(function (angular) {\n\t'use strict';\n\n\tangular.module('21days').run(config);\n\n\tconfig.$inject = ['$animate', '$timeout'];\n\n\tfunction config($animate, $timeout) {\n\t\t$timeout(function () {\n\t\t\tvar loaderContainer = angular.element(document).find('loader-container');\n\t\t\t$animate.leave(loaderContainer, {\n\t\t\t\taddClass: 'hiding'\n\t\t\t});\n\t\t});\n\t}\n})(window.angular);\n\n(function (angular) {\n\t'use strict';\n\n\tangular.module('21days').factory('calculatedDateHistoryService', calculatedDateHistoryService);\n\n\tcalculatedDateHistoryService.$inject = ['$rootScope', 'logService'];\n\n\tfunction calculatedDateHistoryService($rootScope, logService) {\n\t\tvar data = {\n\t\t\tservice: 'calculatedDateHistoryService',\n\t\t\thistory: null\n\t\t};\n\n\t\tvar methods = {\n\t\t\tnewException: newException,\n\t\t\tnotify: notify\n\t\t};\n\n\t\treturn {\n\t\t\tsubscribe: subscribe,\n\t\t\treset: reset,\n\t\t\tsetOriginal: setOriginal,\n\t\t\tsetCalculated: setCalculated,\n\t\t\tsetFinal: setFinal,\n\t\t\taddWeekend: addWeekend,\n\t\t\taddFerie: addFerie\n\t\t};\n\n\t\tfunction subscribe($scope, $callback) {\n\t\t\tvar handler = $rootScope.$on(data.service + ':newHistory', function () {\n\t\t\t\t$callback({\n\t\t\t\t\tnewHistory: data.history\n\t\t\t\t});\n\t\t\t});\n\t\t\t$scope.$on('$destroy', handler);\n\t\t}\n\n\t\tfunction reset() {\n\t\t\tlogService.service(data.service, 'reset');\n\t\t\tdata.history = {\n\t\t\t\texception: false,\n\t\t\t\texceptionTriggered: 0,\n\t\t\t\texceptionList: []\n\t\t\t};\n\t\t}\n\n\t\tfunction setOriginal($date) {\n\t\t\tlogService.service(data.service, 'setOriginal');\n\t\t\tdata.history.original = {\n\t\t\t\tdate: $date\n\t\t\t};\n\t\t}\n\n\t\tfunction setCalculated($date) {\n\t\t\tlogService.service(data.service, 'setCalculated');\n\t\t\tdata.history.calculated = {\n\t\t\t\tdate: $date\n\t\t\t};\n\t\t}\n\n\t\tfunction setFinal($date) {\n\t\t\tlogService.service(data.service, 'setFinal');\n\t\t\tdata.history.final = {\n\t\t\t\tdate: $date\n\t\t\t};\n\t\t\tmethods.notify();\n\t\t}\n\n\t\t/**\r\n   * Add a weekend exception\r\n   * @param {object} $data > Object with data (dateBefore, dateAfter, type (sunday, saturday))\r\n   */\n\t\tfunction addWeekend($data) {\n\t\t\tlogService.service(data.service, 'addWeekend');\n\t\t\tmethods.newException($data);\n\t\t}\n\n\t\t/**\r\n   * Add a ferie exception\r\n   * @param {object} $data > Object with data (dateBefore, dateAfter, ferie)\r\n   */\n\t\tfunction addFerie($data) {\n\t\t\tlogService.service(data.service, 'addFerie');\n\t\t\t$data.type = 'ferie';\n\t\t\tmethods.newException($data);\n\t\t}\n\n\t\tfunction newException($data) {\n\t\t\tdata.history.exception = true;\n\t\t\tdata.history.exceptionTriggered++;\n\t\t\tdata.history.exceptionList.push($data);\n\t\t}\n\n\t\tfunction notify() {\n\t\t\t$rootScope.$emit(data.service + ':newHistory');\n\t\t}\n\t}\n})(window.angular);\n(function (angular) {\n\t'use strict';\n\n\tangular.module('21days').factory('copyService', copyService);\n\n\tcopyService.$inject = ['$animate', 'logService'];\n\n\tfunction copyService($animate, logService) {\n\t\tvar data = {\n\t\t\tservice: 'copyService'\n\t\t};\n\n\t\treturn {\n\t\t\tshow: show\n\t\t};\n\n\t\tfunction show() {\n\t\t\tlogService.fnCalledService(data.service, 'show');\n\t\t\tvar container = angular.element(document).find('copy-container');\n\t\t\t$animate.setClass(container, 'showing', 'hiding').then(function () {\n\t\t\t\t$animate.setClass(container, 'hiding', 'showing').then(function () {\n\t\t\t\t\t$animate.removeClass(container, 'hiding');\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n})(window.angular);\n(function (angular) {\n\t'use strict';\n\n\tangular.module('21days').factory('dateService', dateService);\n\n\tdateService.$inject = ['moment', 'logService', 'appConstant', 'calculatedDateHistoryService'];\n\n\tfunction dateService(moment, logService, appConstant, calculatedDateHistoryService) {\n\t\tvar data = {\n\t\t\tservice: 'dateService',\n\t\t\tdays: 21,\n\t\t\tsunday: 0,\n\t\t\tsaturday: 6,\n\t\t\tone: 1,\n\t\t\ttwo: 2,\n\t\t\tms: 1000\n\t\t};\n\n\t\tvar methods = {\n\t\t\tadd: add,\n\t\t\tisSunday: isSunday,\n\t\t\tisSaturday: isSaturday,\n\t\t\tisDay: isDay,\n\t\t\tisWeekend: isWeekend,\n\t\t\tsetNextDayAfterWeekend: setNextDayAfterWeekend,\n\t\t\tweekendAndExceptionsStuff: weekendAndExceptionsStuff,\n\t\t\treadable: readable,\n\t\t\ttoTimestamp: toTimestamp\n\t\t};\n\n\t\treturn {\n\t\t\tadd21days: add21days,\n\t\t\ttoISOString: toISOString,\n\t\t\ttoString: toString\n\t\t};\n\n\t\tfunction add21days($date) {\n\t\t\tlogService.fnCalledService(data.service, 'add21days');\n\t\t\tif ($date) {\n\t\t\t\tlogService.service(data.service, 'original date is: ' + $date);\n\t\t\t\tcalculatedDateHistoryService.reset();\n\n\t\t\t\t// Convert the date\n\t\t\t\tvar date = moment($date, appConstant.moment.readableFormat, appConstant.lang.current);\n\t\t\t\tlogService.service(data.service, 'moment original date is: ' + methods.readable(date));\n\t\t\t\tcalculatedDateHistoryService.setOriginal(methods.toTimestamp(date));\n\n\t\t\t\t// Add 21 days\n\t\t\t\tdate = methods.add(date, data.days, 'days');\n\t\t\t\tlogService.service(data.service, 'new +21 days date is: ' + methods.readable(date));\n\t\t\t\tcalculatedDateHistoryService.setCalculated(methods.toTimestamp(date));\n\n\t\t\t\treturn methods.weekendAndExceptionsStuff(date);\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tfunction add($date, $quantity, $type) {\n\t\t\treturn moment($date).add($quantity, $type);\n\t\t}\n\n\t\tfunction isSunday($date) {\n\t\t\treturn methods.isDay($date, data.sunday);\n\t\t}\n\n\t\tfunction isSaturday($date) {\n\t\t\treturn methods.isDay($date, data.saturday);\n\t\t}\n\n\t\tfunction isDay($date, $day) {\n\t\t\tvar day = moment($date).day();\n\t\t\treturn day === $day;\n\t\t}\n\n\t\tfunction isWeekend($date) {\n\t\t\treturn methods.isSunday($date) || methods.isSaturday($date);\n\t\t}\n\n\t\tfunction setNextDayAfterWeekend($date) {\n\t\t\tif (methods.isSunday($date)) {\n\t\t\t\treturn methods.add($date, data.one, 'days');\n\t\t\t}\n\t\t\treturn methods.add($date, data.two, 'days');\n\t\t}\n\n\t\tfunction weekendAndExceptionsStuff($date) {\n\t\t\tvar date = $date;\n\n\t\t\t// Check if this is the weekend\n\t\t\tif (methods.isWeekend(date)) {\n\t\t\t\tlogService.service(data.service, 'isWeekend');\n\t\t\t\tvar weekend = {\n\t\t\t\t\tdateBefore: methods.toTimestamp(date),\n\t\t\t\t\tdateAfter: null,\n\t\t\t\t\ttype: methods.isSunday(date) ? 'sunday' : 'saturday'\n\t\t\t\t};\n\n\t\t\t\t// Set the next monday\n\t\t\t\tdate = methods.setNextDayAfterWeekend(date);\n\t\t\t\tlogService.service(data.service, 'new date after weekend: ' + methods.readable(date));\n\t\t\t\tweekend.dateAfter = methods.toTimestamp(date);\n\t\t\t\tcalculatedDateHistoryService.addWeekend(weekend);\n\t\t\t}\n\n\t\t\t// Check if this is an fr exception\n\t\t\tif (date.isFerie()) {\n\t\t\t\tlogService.service(data.service, 'isFerie');\n\t\t\t\tvar ferie = {\n\t\t\t\t\tdateBefore: methods.toTimestamp(date),\n\t\t\t\t\tdateAfter: null,\n\t\t\t\t\tferie: date.getFerie()\n\t\t\t\t};\n\n\t\t\t\t// Add one day\n\t\t\t\tdate = methods.add(date, data.one, 'days');\n\t\t\t\tlogService.service(data.service, 'new date after exception day: ' + methods.readable(date));\n\t\t\t\tferie.dateAfter = methods.toTimestamp(date);\n\t\t\t\tcalculatedDateHistoryService.addFerie(ferie);\n\n\t\t\t\t// Loop again\n\t\t\t\tdate = weekendAndExceptionsStuff(date);\n\t\t\t}\n\t\t\tlogService.service(data.service, 'final new date: ' + methods.readable(date));\n\t\t\tcalculatedDateHistoryService.setFinal(methods.toTimestamp(date));\n\t\t\treturn methods.toTimestamp(date);\n\t\t}\n\n\t\tfunction readable($date) {\n\t\t\treturn moment($date).format(appConstant.moment.readableFormat);\n\t\t}\n\n\t\tfunction toISOString($date) {\n\t\t\tif ($date) {\n\t\t\t\treturn moment($date).toISOString();\n\t\t\t}\n\t\t\treturn moment().toISOString();\n\t\t}\n\n\t\tfunction toString($date) {\n\t\t\tif ($date) {\n\t\t\t\treturn moment($date).toString();\n\t\t\t}\n\t\t\treturn moment().toString();\n\t\t}\n\n\t\tfunction toTimestamp($date) {\n\t\t\treturn moment($date).unix() * data.ms;\n\t\t}\n\t}\n})(window.angular);\n(function (angular) {\n\t'use strict';\n\n\tangular.module('21days').factory('keyboardService', keyboardService);\n\n\tfunction keyboardService() {\n\t\tvar methods = {\n\t\t\tanalyzeKey: analyzeKey\n\t\t};\n\n\t\treturn {\n\t\t\tbindKeyDown: bindKeyDown\n\t\t};\n\n\t\tfunction bindKeyDown($scope, $element, $attrs, $key, $name) {\n\t\t\t$element.bind('keydown keypress', function ($event) {\n\t\t\t\tif (angular.isArray($key)) {\n\t\t\t\t\tangular.forEach($key, function (key) {\n\t\t\t\t\t\tmethods.analyzeKey($scope, $attrs, $name, $event, key);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tmethods.analyzeKey($scope, $attrs, $name, $event, $key);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tfunction analyzeKey($scope, $attrs, $name, $event, $key) {\n\t\t\tif ($event.keyCode === $key) {\n\t\t\t\t$event.preventDefault();\n\t\t\t\t$event.stopPropagation();\n\t\t\t\t$scope.$apply(function () {\n\t\t\t\t\t$scope.$eval($attrs[$name]);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n})(window.angular);\n(function (angular) {\n\t'use strict';\n\n\tangular.module('21days').factory('logService', logService);\n\n\tlogService.$inject = ['$log'];\n\n\tfunction logService($log) {\n\t\treturn {\n\t\t\tinit: init,\n\t\t\tlog: log,\n\t\t\tfnCalled: fnCalled,\n\t\t\tservice: service,\n\t\t\tfnCalledService: fnCalledService\n\t\t};\n\n\t\tfunction init($target) {\n\t\t\t$log.log('Init >>>', $target);\n\t\t}\n\n\t\tfunction log($text) {\n\t\t\t$log.info($text);\n\t\t}\n\n\t\tfunction fnCalled($functionName) {\n\t\t\t$log.log($functionName, 'called');\n\t\t}\n\n\t\tfunction service($service, $text) {\n\t\t\t$log.info($service, '>>>', $text);\n\t\t}\n\n\t\tfunction fnCalledService($service, $functionName) {\n\t\t\t$log.log($service, '>>>', $functionName, 'called');\n\t\t}\n\t}\n})(window.angular);\n'use strict';\n\nvar Methods = {\n\tsafeApply: safeApply\n};\n\n// Force a digest in angular app safely\nfunction safeApply(scope, fn) {\n\tvar phase = scope.$root;\n\tif (phase) {\n\t\tphase = phase.$$phase;\n\t\tif ('$apply' === phase || '$digest' === phase) {\n\t\t\tif (fn && 'function' === typeof fn) {\n\t\t\t\tfn();\n\t\t\t}\n\t\t} else {\n\t\t\tscope.$apply(fn);\n\t\t}\n\t}\n}\n(function (angular) {\n\t'use strict';\n\n\tangular.module('21days').run(config);\n\n\tconfig.$inject = [];\n\n\tfunction config() {\n\t\tconsole.info('21-days version: 0.9.4');\n\t}\n})(window.angular);\n\n/* end:concat-scripts */\n//# sourceMappingURL=scripts.js.map\n//# sourceMappingURL=21-days.js.map\n"]}