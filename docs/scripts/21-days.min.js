'use strict';(function(a){'use strict';a.module('21days',['tmh.dynamicLocale','720kb.datepicker','ngclipboard','ngAnimate','log.ex.uo'])})(window.angular);(function(a){'use strict';a.module('21days').config(b);b.$inject=['$compileProvider','appConstant'];function b(a,b){a.debugInfoEnabled(b.debugInfoEnabled)}})(window.angular);(function(a){'use strict';a.module('21days').config(b);b.$inject=['logExProvider','appConstant'];function b(b,c){b.enableLogging(c.logs.enabled);b.overrideLogPrefix(function(b){var c=a.injector(['ng']);var d=c.get('$filter');var e=' >>';var f='hh:mm:ss';var g=d('date')(new Date,f);return g.toString()+(!a.isString(b)?'':'::'+b)+e})}})(window.angular);(function(a){'use strict';a.module('21days').config(b);b.$inject=['tmhDynamicLocaleProvider'];function b(a){a.localeLocationPattern('/21-days/bower_components/angular-i18n/angular-locale_{{locale}}.js').defaultLocale('fr')}})(window.angular);(function(a){'use strict';a.module('21days').constant('appConstant',{logs:{enabled:false},lang:{current:'fr'},debugInfoEnabled:false,moment:{readableFormat:'dddd DD MMMM YYYY'}})})(window.angular);(function(a){'use strict';a.module('21days').constant('moment',moment).constant('methods',Methods)})(window.angular);(function(a){'use strict';a.module('21days').controller('mainController',b);b.$inject=['$scope','logService','dateService','$window','methods','$timeout','copyService','calculatedDateHistoryService'];function b(a,b,c,d,e,f,g,h){var t=this;t.data={controller:'mainController',today:c.toString(),initialDate:null,showDatepicker:false,isHoverDatepicker:false,history:null};t.methods={define21Date:i,onDatepickerClick:j,toggleDatepicker:k,onDatepickerEnter:l,onDatepickerFocus:m,onWindowClick:n,hideDatepicker:o,isDatepickerOpen:p,isHoverDatepicker:q,onCopySuccess:r,onInitialDateChange:s};b.init(t.data.controller);t.calculatedDate=null;a.$watch('initialDate',function(){f(function(){t.methods.define21Date()})});d.addEventListener('click',t.methods.onWindowClick);h.subscribe(a,function(a){t.data.history=a.newHistory});function i(){b.fnCalled('define21Date');t.calculatedDate=c.add21days(t.initialDate)}function j(a){b.fnCalled('onDatepickerClick');a.stopPropagation();t.methods.toggleDatepicker()}function k(){b.fnCalled('toggleDatepicker');t.data.showDatepicker=!t.data.showDatepicker;t.methods.define21Date()}function l(){b.fnCalled('onDatepickerEnter');t.methods.toggleDatepicker()}function m(a){b.fnCalled('onDatepickerFocus');a.stopPropagation();t.methods.toggleDatepicker()}function n(){b.fnCalled('onWindowClick');t.methods.hideDatepicker()}function o(){b.fnCalled('hideDatepicker');if(t.methods.isDatepickerOpen()&&!t.methods.isHoverDatepicker()){t.data.showDatepicker=false;t.methods.define21Date();e.safeApply(a)}}function p(){return t.data.showDatepicker}function q(){return t.data.isHoverDatepicker}function r(){b.fnCalled('onCopySuccess');g.show()}function s(){b.fnCalled('onInitialDateChange');f(t.methods.define21Date)}}})(window.angular);(function(a){'use strict';a.module('21days').directive('onEnter',b);b.$inject=['keyboardService'];function b(a){var c={enter:13};return{link:b,restrict:'A'};function b(b,d,e){a.bindKeyDown(b,d,e,c.enter,'onEnter')}}})(window.angular);(function(a){'use strict';a.module('21days').run(b);b.$inject=['tmhDynamicLocale','moment','appConstant'];function b(a,b,c){a.set(c.lang.current);b.locale(c.lang.current)}})(window.angular);(function(a){'use strict';a.module('21days').run(b);b.$inject=['$animate','$timeout'];function b(b,c){c(function(){var c=a.element(document).find('loader-container');b.leave(c,{addClass:'hiding'})})}})(window.angular);(function(a){'use strict';a.module('21days').factory('calculatedDateHistoryService',b);b.$inject=['$rootScope','logService'];function b(a,b){var l={service:'calculatedDateHistoryService',history:null};var m={newException:j,notify:k};return{subscribe:c,reset:d,setOriginal:e,setCalculated:f,setFinal:g,addWeekend:h,addFerie:i};function c(b,c){var d=a.$on(l.service+':newHistory',function(){c({newHistory:l.history})});b.$on('$destroy',d)}function d(){b.service(l.service,'reset');l.history={exception:false,exceptionTriggered:0,exceptionList:[]}}function e(a){b.service(l.service,'setOriginal');l.history.original={date:a}}function f(a){b.service(l.service,'setCalculated');l.history.calculated={date:a}}function g(a){b.service(l.service,'setFinal');l.history.final={date:a};m.notify()}function h(a){b.service(l.service,'addWeekend');m.newException(a)}function i(a){b.service(l.service,'addFerie');a.type='ferie';m.newException(a)}function j(a){l.history.exception=true;l.history.exceptionTriggered++;l.history.exceptionList.push(a)}function k(){a.$emit(l.service+':newHistory')}}})(window.angular);(function(a){'use strict';a.module('21days').factory('copyService',b);b.$inject=['$animate','logService'];function b(b,c){var e={service:'copyService'};return{show:d};function d(){c.fnCalledService(e.service,'show');var d=a.element(document).find('copy-container');b.setClass(d,'showing','hiding').then(function(){b.setClass(d,'hiding','showing').then(function(){b.removeClass(d,'hiding')})})}}})(window.angular);(function(a){'use strict';a.module('21days').factory('dateService',b);b.$inject=['moment','logService','appConstant','calculatedDateHistoryService'];function b(a,b,c,d){var q={service:'dateService',days:21,sunday:0,saturday:6,one:1,two:2,ms:1000};var r={add:f,isSunday:g,isSaturday:h,isDay:i,isWeekend:j,setNextDayAfterWeekend:k,weekendAndExceptionsStuff:l,readable:m,toTimestamp:p};return{add21days:e,toISOString:n,toString:o};function e(e){b.fnCalledService(q.service,'add21days');if(e){b.service(q.service,'original date is: '+e);d.reset();var f=a(e,c.moment.readableFormat,c.lang.current);b.service(q.service,'moment original date is: '+r.readable(f));d.setOriginal(r.toTimestamp(f));f=r.add(f,q.days,'days');b.service(q.service,'new +21 days date is: '+r.readable(f));d.setCalculated(r.toTimestamp(f));return r.weekendAndExceptionsStuff(f)}return null}function f(b,c,d){return a(b).add(c,d)}function g(a){return r.isDay(a,q.sunday)}function h(a){return r.isDay(a,q.saturday)}function i(b,c){var d=a(b).day();return d===c}function j(a){return r.isSunday(a)||r.isSaturday(a)}function k(a){if(r.isSunday(a)){return r.add(a,q.one,'days')}return r.add(a,q.two,'days')}function l(a){var c=a;if(r.isWeekend(c)){b.service(q.service,'isWeekend');var e={dateBefore:r.toTimestamp(c),dateAfter:null,type:r.isSunday(c)?'sunday':'saturday'};c=r.setNextDayAfterWeekend(c);b.service(q.service,'new date after weekend: '+r.readable(c));e.dateAfter=r.toTimestamp(c);d.addWeekend(e)}if(c.isFerie()){b.service(q.service,'isFerie');var f={dateBefore:r.toTimestamp(c),dateAfter:null,ferie:c.getFerie()};c=r.add(c,q.one,'days');b.service(q.service,'new date after exception day: '+r.readable(c));f.dateAfter=r.toTimestamp(c);d.addFerie(f);c=l(c)}b.service(q.service,'final new date: '+r.readable(c));d.setFinal(r.toTimestamp(c));return r.toTimestamp(c)}function m(b){return a(b).format(c.moment.readableFormat)}function n(b){if(b){return a(b).toISOString()}return a().toISOString()}function o(b){if(b){return a(b).toString()}return a().toString()}function p(b){return a(b).unix()*q.ms}}})(window.angular);(function(a){'use strict';a.module('21days').factory('keyboardService',b);function b(){var d={analyzeKey:c};return{bindKeyDown:b};function b(b,c,e,f,g){c.bind('keydown keypress',function(c){if(a.isArray(f)){a.forEach(f,function(a){d.analyzeKey(b,e,g,c,a)})}else{d.analyzeKey(b,e,g,c,f)}})}function c(a,b,c,d,e){if(d.keyCode===e){d.preventDefault();d.stopPropagation();a.$apply(function(){a.$eval(b[c])})}}}})(window.angular);(function(a){'use strict';a.module('21days').factory('logService',b);b.$inject=['$log'];function b(a){return{init:b,log:c,fnCalled:d,service:e,fnCalledService:f};function b(b){a.log('Init >>>',b)}function c(b){a.info(b)}function d(b){a.log(b,'called')}function e(b,c){a.info(b,'>>>',c)}function f(b,c){a.log(b,'>>>',c,'called')}}})(window.angular);'use strict';var Methods={safeApply:safeApply};function safeApply(a,b){var c=a.$root;if(c){c=c.$$phase;if('$apply'===c||'$digest'===c){if(b&&'function'===typeof b){b()}}else{a.$apply(b)}}}
//# sourceMappingURL=21-days.min.js.map
