{"version":3,"sources":["../../.tmp/release/21-days.js"],"names":["module","window","angular","config","$inject","debugInfoEnabled","enableLogging","logs","enabled","overrideLogPrefix","injector","get","Date","toString","isString","localeLocationPattern","defaultLocale","constant","lang","current","moment","readableFormat","Methods","controller","data","today","initialDate","showDatepicker","isHoverDatepicker","history","methods","define21Date","onDatepickerClick","toggleDatepicker","onDatepickerEnter","onDatepickerFocus","onWindowClick","hideDatepicker","isDatepickerOpen","onCopySuccess","onInitialDateChange","init","calculatedDate","$watch","addEventListener","subscribe","newHistory","fnCalled","add21days","stopPropagation","safeApply","show","directive","enter","link","restrict","bindKeyDown","run","set","locale","element","document","find","leave","addClass","factory","service","newException","notify","reset","setOriginal","setCalculated","setFinal","addWeekend","addFerie","$on","exception","exceptionTriggered","exceptionList","original","date","calculated","final","type","push","$emit","fnCalledService","setClass","then","removeClass","days","sunday","saturday","one","two","ms","add","isSunday","isSaturday","isDay","isWeekend","setNextDayAfterWeekend","weekendAndExceptionsStuff","readable","toTimestamp","toISOString","day","dateBefore","dateAfter","isFerie","ferie","getFerie","format","unix","analyzeKey","bind","isArray","forEach","keyCode","preventDefault","$apply","$eval","log","info","$root","$$phase"],"mappings":"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","file":"21-days.min.js","sourcesContent":["'use strict';\n\n/* start:concat-scripts */\n(function (angular) {\n\t'use strict';\n\n\tangular.module('21days', ['tmh.dynamicLocale', '720kb.datepicker', 'ngclipboard', 'ngAnimate', 'log.ex.uo']);\n})(window.angular);\n\n(function (angular) {\n\t'use strict';\n\n\tangular.module('21days').config(config);\n\n\tconfig.$inject = ['$compileProvider', 'appConstant'];\n\n\tfunction config($compileProvider, appConstant) {\n\t\t$compileProvider.debugInfoEnabled(appConstant.debugInfoEnabled);\n\t}\n})(window.angular);\n(function (angular) {\n\t'use strict';\n\n\tangular.module('21days').config(config);\n\n\tconfig.$inject = ['logExProvider', 'appConstant'];\n\n\tfunction config(logExProvider, appConstant) {\n\t\tlogExProvider.enableLogging(appConstant.logs.enabled);\n\t\tlogExProvider.overrideLogPrefix(function ($className) {\n\t\t\tvar $injector = angular.injector(['ng']);\n\t\t\tvar $filter = $injector.get('$filter');\n\t\t\tvar separator = ' >>';\n\t\t\tvar format = 'hh:mm:ss';\n\t\t\tvar now = $filter('date')(new Date(), format);\n\t\t\treturn now.toString() + (!angular.isString($className) ? '' : '::' + $className) + separator;\n\t\t});\n\t}\n})(window.angular);\n(function (angular) {\n\t'use strict';\n\n\tangular.module('21days').config(config);\n\n\tconfig.$inject = ['tmhDynamicLocaleProvider'];\n\n\tfunction config(tmhDynamicLocaleProvider) {\n\t\ttmhDynamicLocaleProvider.localeLocationPattern('/21-days/bower_components/angular-i18n/angular-locale_{{locale}}.js').defaultLocale('fr');\n\t}\n})(window.angular);\n\n(function (angular) {\n\t'use strict';\n\n\tangular.module('21days').constant('appConstant', {\n\t\tlogs: {\n\t\t\tenabled: false\n\t\t},\n\t\tlang: {\n\t\t\tcurrent: 'fr'\n\t\t},\n\t\tdebugInfoEnabled: false,\n\t\tmoment: {\n\t\t\treadableFormat: 'dddd DD MMMM YYYY'\n\t\t}\n\t});\n})(window.angular);\n(function (angular) {\n\t'use strict';\n\n\tangular.module('21days').constant('moment', moment).constant('methods', Methods);\n})(window.angular);\n\n(function (angular) {\n\t'use strict';\n\n\tangular.module('21days').controller('mainController', mainController);\n\n\tmainController.$inject = ['$scope', 'logService', 'dateService', '$window', 'methods', '$timeout', 'copyService', 'calculatedDateHistoryService'];\n\n\tfunction mainController($scope, logService, dateService, $window, methods, $timeout, copyService, calculatedDateHistoryService) {\n\t\tvar vm = this;\n\n\t\t// Public data\n\t\tvm.data = {\n\t\t\tcontroller: 'mainController',\n\t\t\ttoday: dateService.toString(),\n\t\t\tinitialDate: null,\n\t\t\tshowDatepicker: false,\n\t\t\tisHoverDatepicker: false,\n\t\t\thistory: null\n\t\t};\n\n\t\t// Public methods\n\t\tvm.methods = {\n\t\t\tdefine21Date: define21Date,\n\t\t\tonDatepickerClick: onDatepickerClick,\n\t\t\ttoggleDatepicker: toggleDatepicker,\n\t\t\tonDatepickerEnter: onDatepickerEnter,\n\t\t\tonDatepickerFocus: onDatepickerFocus,\n\t\t\tonWindowClick: onWindowClick,\n\t\t\thideDatepicker: hideDatepicker,\n\t\t\tisDatepickerOpen: isDatepickerOpen,\n\t\t\tisHoverDatepicker: isHoverDatepicker,\n\t\t\tonCopySuccess: onCopySuccess,\n\t\t\tonInitialDateChange: onInitialDateChange\n\t\t};\n\n\t\t// Init\n\t\tlogService.init(vm.data.controller);\n\t\tvm.calculatedDate = null;\n\n\t\t// Watch initialDate changes\n\t\t$scope.$watch('initialDate', function () {\n\t\t\t$timeout(function () {\n\t\t\t\tvm.methods.define21Date();\n\t\t\t});\n\t\t});\n\n\t\t// Listen window click\n\t\t$window.addEventListener('click', vm.methods.onWindowClick);\n\n\t\t// Subscribe to calculated date history\n\t\tcalculatedDateHistoryService.subscribe($scope, function ($data) {\n\t\t\tvm.data.history = $data.newHistory;\n\t\t});\n\n\t\tfunction define21Date() {\n\t\t\tlogService.fnCalled('define21Date');\n\t\t\tvm.calculatedDate = dateService.add21days(vm.initialDate);\n\t\t}\n\n\t\tfunction onDatepickerClick($event) {\n\t\t\tlogService.fnCalled('onDatepickerClick');\n\t\t\t$event.stopPropagation();\n\t\t\tvm.methods.toggleDatepicker();\n\t\t}\n\n\t\tfunction toggleDatepicker() {\n\t\t\tlogService.fnCalled('toggleDatepicker');\n\t\t\tvm.data.showDatepicker = !vm.data.showDatepicker;\n\t\t\tvm.methods.define21Date();\n\t\t}\n\n\t\tfunction onDatepickerEnter() {\n\t\t\tlogService.fnCalled('onDatepickerEnter');\n\t\t\tvm.methods.toggleDatepicker();\n\t\t}\n\n\t\tfunction onDatepickerFocus($event) {\n\t\t\tlogService.fnCalled('onDatepickerFocus');\n\t\t\t$event.stopPropagation();\n\t\t\tvm.methods.toggleDatepicker();\n\t\t}\n\n\t\tfunction onWindowClick() {\n\t\t\tlogService.fnCalled('onWindowClick');\n\t\t\tvm.methods.hideDatepicker();\n\t\t}\n\n\t\tfunction hideDatepicker() {\n\t\t\tlogService.fnCalled('hideDatepicker');\n\t\t\tif (vm.methods.isDatepickerOpen() && !vm.methods.isHoverDatepicker()) {\n\t\t\t\tvm.data.showDatepicker = false;\n\t\t\t\tvm.methods.define21Date();\n\t\t\t\tmethods.safeApply($scope);\n\t\t\t}\n\t\t}\n\n\t\tfunction isDatepickerOpen() {\n\t\t\treturn vm.data.showDatepicker;\n\t\t}\n\n\t\tfunction isHoverDatepicker() {\n\t\t\treturn vm.data.isHoverDatepicker;\n\t\t}\n\n\t\tfunction onCopySuccess() {\n\t\t\tlogService.fnCalled('onCopySuccess');\n\t\t\tcopyService.show();\n\t\t}\n\n\t\tfunction onInitialDateChange() {\n\t\t\tlogService.fnCalled('onInitialDateChange');\n\t\t\t$timeout(vm.methods.define21Date);\n\t\t}\n\t}\n})(window.angular);\n\n(function (angular) {\n\t'use strict';\n\n\tangular.module('21days').directive('onEnter', onEnter);\n\n\tonEnter.$inject = ['keyboardService'];\n\n\tfunction onEnter(keyboardService) {\n\t\tvar data = {\n\t\t\tenter: 13\n\t\t};\n\n\t\treturn {\n\t\t\tlink: link,\n\t\t\trestrict: 'A'\n\t\t};\n\n\t\tfunction link(scope, element, attrs) {\n\t\t\tkeyboardService.bindKeyDown(scope, element, attrs, data.enter, 'onEnter');\n\t\t}\n\t}\n})(window.angular);\n\n(function (angular) {\n\t'use strict';\n\n\tangular.module('21days').run(config);\n\n\tconfig.$inject = ['tmhDynamicLocale', 'moment', 'appConstant'];\n\n\tfunction config(tmhDynamicLocale, moment, appConstant) {\n\t\ttmhDynamicLocale.set(appConstant.lang.current);\n\t\tmoment.locale(appConstant.lang.current);\n\t}\n})(window.angular);\n(function (angular) {\n\t'use strict';\n\n\tangular.module('21days').run(config);\n\n\tconfig.$inject = ['$animate', '$timeout'];\n\n\tfunction config($animate, $timeout) {\n\t\t$timeout(function () {\n\t\t\tvar loaderContainer = angular.element(document).find('loader-container');\n\t\t\t$animate.leave(loaderContainer, {\n\t\t\t\taddClass: 'hiding'\n\t\t\t});\n\t\t});\n\t}\n})(window.angular);\n\n(function (angular) {\n\t'use strict';\n\n\tangular.module('21days').factory('calculatedDateHistoryService', calculatedDateHistoryService);\n\n\tcalculatedDateHistoryService.$inject = ['$rootScope', 'logService'];\n\n\tfunction calculatedDateHistoryService($rootScope, logService) {\n\t\tvar data = {\n\t\t\tservice: 'calculatedDateHistoryService',\n\t\t\thistory: null\n\t\t};\n\n\t\tvar methods = {\n\t\t\tnewException: newException,\n\t\t\tnotify: notify\n\t\t};\n\n\t\treturn {\n\t\t\tsubscribe: subscribe,\n\t\t\treset: reset,\n\t\t\tsetOriginal: setOriginal,\n\t\t\tsetCalculated: setCalculated,\n\t\t\tsetFinal: setFinal,\n\t\t\taddWeekend: addWeekend,\n\t\t\taddFerie: addFerie\n\t\t};\n\n\t\tfunction subscribe($scope, $callback) {\n\t\t\tvar handler = $rootScope.$on(data.service + ':newHistory', function () {\n\t\t\t\t$callback({\n\t\t\t\t\tnewHistory: data.history\n\t\t\t\t});\n\t\t\t});\n\t\t\t$scope.$on('$destroy', handler);\n\t\t}\n\n\t\tfunction reset() {\n\t\t\tlogService.service(data.service, 'reset');\n\t\t\tdata.history = {\n\t\t\t\texception: false,\n\t\t\t\texceptionTriggered: 0,\n\t\t\t\texceptionList: []\n\t\t\t};\n\t\t}\n\n\t\tfunction setOriginal($date) {\n\t\t\tlogService.service(data.service, 'setOriginal');\n\t\t\tdata.history.original = {\n\t\t\t\tdate: $date\n\t\t\t};\n\t\t}\n\n\t\tfunction setCalculated($date) {\n\t\t\tlogService.service(data.service, 'setCalculated');\n\t\t\tdata.history.calculated = {\n\t\t\t\tdate: $date\n\t\t\t};\n\t\t}\n\n\t\tfunction setFinal($date) {\n\t\t\tlogService.service(data.service, 'setFinal');\n\t\t\tdata.history.final = {\n\t\t\t\tdate: $date\n\t\t\t};\n\t\t\tmethods.notify();\n\t\t}\n\n\t\t/**\r\n   * Add a weekend exception\r\n   * @param {object} $data > Object with data (dateBefore, dateAfter, type (sunday, saturday))\r\n   */\n\t\tfunction addWeekend($data) {\n\t\t\tlogService.service(data.service, 'addWeekend');\n\t\t\tmethods.newException($data);\n\t\t}\n\n\t\t/**\r\n   * Add a ferie exception\r\n   * @param {object} $data > Object with data (dateBefore, dateAfter, ferie)\r\n   */\n\t\tfunction addFerie($data) {\n\t\t\tlogService.service(data.service, 'addFerie');\n\t\t\t$data.type = 'ferie';\n\t\t\tmethods.newException($data);\n\t\t}\n\n\t\tfunction newException($data) {\n\t\t\tdata.history.exception = true;\n\t\t\tdata.history.exceptionTriggered++;\n\t\t\tdata.history.exceptionList.push($data);\n\t\t}\n\n\t\tfunction notify() {\n\t\t\t$rootScope.$emit(data.service + ':newHistory');\n\t\t}\n\t}\n})(window.angular);\n(function (angular) {\n\t'use strict';\n\n\tangular.module('21days').factory('copyService', copyService);\n\n\tcopyService.$inject = ['$animate', 'logService'];\n\n\tfunction copyService($animate, logService) {\n\t\tvar data = {\n\t\t\tservice: 'copyService'\n\t\t};\n\n\t\treturn {\n\t\t\tshow: show\n\t\t};\n\n\t\tfunction show() {\n\t\t\tlogService.fnCalledService(data.service, 'show');\n\t\t\tvar container = angular.element(document).find('copy-container');\n\t\t\t$animate.setClass(container, 'showing', 'hiding').then(function () {\n\t\t\t\t$animate.setClass(container, 'hiding', 'showing').then(function () {\n\t\t\t\t\t$animate.removeClass(container, 'hiding');\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n})(window.angular);\n(function (angular) {\n\t'use strict';\n\n\tangular.module('21days').factory('dateService', dateService);\n\n\tdateService.$inject = ['moment', 'logService', 'appConstant', 'calculatedDateHistoryService'];\n\n\tfunction dateService(moment, logService, appConstant, calculatedDateHistoryService) {\n\t\tvar data = {\n\t\t\tservice: 'dateService',\n\t\t\tdays: 21,\n\t\t\tsunday: 0,\n\t\t\tsaturday: 6,\n\t\t\tone: 1,\n\t\t\ttwo: 2,\n\t\t\tms: 1000\n\t\t};\n\n\t\tvar methods = {\n\t\t\tadd: add,\n\t\t\tisSunday: isSunday,\n\t\t\tisSaturday: isSaturday,\n\t\t\tisDay: isDay,\n\t\t\tisWeekend: isWeekend,\n\t\t\tsetNextDayAfterWeekend: setNextDayAfterWeekend,\n\t\t\tweekendAndExceptionsStuff: weekendAndExceptionsStuff,\n\t\t\treadable: readable,\n\t\t\ttoTimestamp: toTimestamp\n\t\t};\n\n\t\treturn {\n\t\t\tadd21days: add21days,\n\t\t\ttoISOString: toISOString,\n\t\t\ttoString: toString\n\t\t};\n\n\t\tfunction add21days($date) {\n\t\t\tlogService.fnCalledService(data.service, 'add21days');\n\t\t\tif ($date) {\n\t\t\t\tlogService.service(data.service, 'original date is: ' + $date);\n\t\t\t\tcalculatedDateHistoryService.reset();\n\n\t\t\t\t// Convert the date\n\t\t\t\tvar date = moment($date, appConstant.moment.readableFormat, appConstant.lang.current);\n\t\t\t\tlogService.service(data.service, 'moment original date is: ' + methods.readable(date));\n\t\t\t\tcalculatedDateHistoryService.setOriginal(methods.toTimestamp(date));\n\n\t\t\t\t// Add 21 days\n\t\t\t\tdate = methods.add(date, data.days, 'days');\n\t\t\t\tlogService.service(data.service, 'new +21 days date is: ' + methods.readable(date));\n\t\t\t\tcalculatedDateHistoryService.setCalculated(methods.toTimestamp(date));\n\n\t\t\t\treturn methods.weekendAndExceptionsStuff(date);\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tfunction add($date, $quantity, $type) {\n\t\t\treturn moment($date).add($quantity, $type);\n\t\t}\n\n\t\tfunction isSunday($date) {\n\t\t\treturn methods.isDay($date, data.sunday);\n\t\t}\n\n\t\tfunction isSaturday($date) {\n\t\t\treturn methods.isDay($date, data.saturday);\n\t\t}\n\n\t\tfunction isDay($date, $day) {\n\t\t\tvar day = moment($date).day();\n\t\t\treturn day === $day;\n\t\t}\n\n\t\tfunction isWeekend($date) {\n\t\t\treturn methods.isSunday($date) || methods.isSaturday($date);\n\t\t}\n\n\t\tfunction setNextDayAfterWeekend($date) {\n\t\t\tif (methods.isSunday($date)) {\n\t\t\t\treturn methods.add($date, data.one, 'days');\n\t\t\t}\n\t\t\treturn methods.add($date, data.two, 'days');\n\t\t}\n\n\t\tfunction weekendAndExceptionsStuff($date) {\n\t\t\tvar date = $date;\n\n\t\t\t// Check if this is the weekend\n\t\t\tif (methods.isWeekend(date)) {\n\t\t\t\tlogService.service(data.service, 'isWeekend');\n\t\t\t\tvar weekend = {\n\t\t\t\t\tdateBefore: methods.toTimestamp(date),\n\t\t\t\t\tdateAfter: null,\n\t\t\t\t\ttype: methods.isSunday(date) ? 'sunday' : 'saturday'\n\t\t\t\t};\n\n\t\t\t\t// Set the next monday\n\t\t\t\tdate = methods.setNextDayAfterWeekend(date);\n\t\t\t\tlogService.service(data.service, 'new date after weekend: ' + methods.readable(date));\n\t\t\t\tweekend.dateAfter = methods.toTimestamp(date);\n\t\t\t\tcalculatedDateHistoryService.addWeekend(weekend);\n\t\t\t}\n\n\t\t\t// Check if this is an fr exception\n\t\t\tif (date.isFerie()) {\n\t\t\t\tlogService.service(data.service, 'isFerie');\n\t\t\t\tvar ferie = {\n\t\t\t\t\tdateBefore: methods.toTimestamp(date),\n\t\t\t\t\tdateAfter: null,\n\t\t\t\t\tferie: date.getFerie()\n\t\t\t\t};\n\n\t\t\t\t// Add one day\n\t\t\t\tdate = methods.add(date, data.one, 'days');\n\t\t\t\tlogService.service(data.service, 'new date after exception day: ' + methods.readable(date));\n\t\t\t\tferie.dateAfter = methods.toTimestamp(date);\n\t\t\t\tcalculatedDateHistoryService.addFerie(ferie);\n\n\t\t\t\t// Loop again\n\t\t\t\tdate = weekendAndExceptionsStuff(date);\n\t\t\t}\n\t\t\tlogService.service(data.service, 'final new date: ' + methods.readable(date));\n\t\t\tcalculatedDateHistoryService.setFinal(methods.toTimestamp(date));\n\t\t\treturn methods.toTimestamp(date);\n\t\t}\n\n\t\tfunction readable($date) {\n\t\t\treturn moment($date).format(appConstant.moment.readableFormat);\n\t\t}\n\n\t\tfunction toISOString($date) {\n\t\t\tif ($date) {\n\t\t\t\treturn moment($date).toISOString();\n\t\t\t}\n\t\t\treturn moment().toISOString();\n\t\t}\n\n\t\tfunction toString($date) {\n\t\t\tif ($date) {\n\t\t\t\treturn moment($date).toString();\n\t\t\t}\n\t\t\treturn moment().toString();\n\t\t}\n\n\t\tfunction toTimestamp($date) {\n\t\t\treturn moment($date).unix() * data.ms;\n\t\t}\n\t}\n})(window.angular);\n(function (angular) {\n\t'use strict';\n\n\tangular.module('21days').factory('keyboardService', keyboardService);\n\n\tfunction keyboardService() {\n\t\tvar methods = {\n\t\t\tanalyzeKey: analyzeKey\n\t\t};\n\n\t\treturn {\n\t\t\tbindKeyDown: bindKeyDown\n\t\t};\n\n\t\tfunction bindKeyDown($scope, $element, $attrs, $key, $name) {\n\t\t\t$element.bind('keydown keypress', function ($event) {\n\t\t\t\tif (angular.isArray($key)) {\n\t\t\t\t\tangular.forEach($key, function (key) {\n\t\t\t\t\t\tmethods.analyzeKey($scope, $attrs, $name, $event, key);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tmethods.analyzeKey($scope, $attrs, $name, $event, $key);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tfunction analyzeKey($scope, $attrs, $name, $event, $key) {\n\t\t\tif ($event.keyCode === $key) {\n\t\t\t\t$event.preventDefault();\n\t\t\t\t$event.stopPropagation();\n\t\t\t\t$scope.$apply(function () {\n\t\t\t\t\t$scope.$eval($attrs[$name]);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n})(window.angular);\n(function (angular) {\n\t'use strict';\n\n\tangular.module('21days').factory('logService', logService);\n\n\tlogService.$inject = ['$log'];\n\n\tfunction logService($log) {\n\t\treturn {\n\t\t\tinit: init,\n\t\t\tlog: log,\n\t\t\tfnCalled: fnCalled,\n\t\t\tservice: service,\n\t\t\tfnCalledService: fnCalledService\n\t\t};\n\n\t\tfunction init($target) {\n\t\t\t$log.log('Init >>>', $target);\n\t\t}\n\n\t\tfunction log($text) {\n\t\t\t$log.info($text);\n\t\t}\n\n\t\tfunction fnCalled($functionName) {\n\t\t\t$log.log($functionName, 'called');\n\t\t}\n\n\t\tfunction service($service, $text) {\n\t\t\t$log.info($service, '>>>', $text);\n\t\t}\n\n\t\tfunction fnCalledService($service, $functionName) {\n\t\t\t$log.log($service, '>>>', $functionName, 'called');\n\t\t}\n\t}\n})(window.angular);\n'use strict';\n\nvar Methods = {\n\tsafeApply: safeApply\n};\n\n// Force a digest in angular app safely\nfunction safeApply(scope, fn) {\n\tvar phase = scope.$root;\n\tif (phase) {\n\t\tphase = phase.$$phase;\n\t\tif ('$apply' === phase || '$digest' === phase) {\n\t\t\tif (fn && 'function' === typeof fn) {\n\t\t\t\tfn();\n\t\t\t}\n\t\t} else {\n\t\t\tscope.$apply(fn);\n\t\t}\n\t}\n}\n/* end:concat-scripts */\n//# sourceMappingURL=scripts.js.map\n//# sourceMappingURL=21-days.js.map\n"]}